var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}
return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__read=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator]
if(!n)return t
var r,o,i=n.call(t),s=[]
try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]))
return t}
try{eval("var std = require('tstl');"),eval("var http = require('http');"),eval("var websocket = require('websocket');"),eval("var net = require('net');")}catch(t){}var samchon
!function(t){var e
!function(t){var e=function(e){function n(t){void 0===t&&(t="")
var n=e.call(this)||this
if(n.property_map_=new std.HashMap,n.value_="",t.indexOf("<")==-1)return n
var r,o
for((r=t.indexOf("<?xml"))!=-1&&(o=t.indexOf("?>",r),o!=-1&&(t=t.substr(o+2)));(r=t.indexOf("<!--"))!=-1&&(o=t.indexOf("-->",r),o==-1);)t=t.substr(0,r)+t.substr(o+3)
return n._Parse(t),n}return __extends(n,e),n.prototype._Parse=function(t){this._Parse_tag(t),this._Parse_properties(t)
var e=this._Parse_value(t)
1==e.second&&this._Parse_children(e.first)},n.prototype._Parse_tag=function(t){var e=t.indexOf("<")+1,n=this._Compute_min_index(t.indexOf(" ",e),t.indexOf("\r\n",e),t.indexOf("\n",e),t.indexOf("\t",e),t.indexOf(">",e),t.indexOf("/",e))
0!=e&&n!=-1&&(this.tag_=t.substring(e,n))},n.prototype._Parse_properties=function(t){var e=t.indexOf("<"+this.tag_)+this.tag_.length+1,n=this._Compute_min_index(t.lastIndexOf("/"),t.indexOf(">",e))
if(!(e==-1||n==-1||e>=n)){var r=t.substring(e,n)
if(r.indexOf("=")!=-1){for(var o,i,s,a,c=[],l=!1,u=0;u<r.length;u++)0!=l||"'"!=r.charAt(u)&&'"'!=r.charAt(u)?1==l&&(1==s&&"'"==r.charAt(u)||2==s&&'"'==r.charAt(u))&&(c.push({type:s,start:e,end:u}),l=!1):(l=!0,e=u,"'"==r.charAt(u)?s=1:'"'==r.charAt(u)&&(s=2))
for(var u=0;u<c.length;u++){c[u]
0==u?(a=r.indexOf("="),o=r.substring(0,a).trim()):(a=r.indexOf("=",c[u-1].end+1),o=r.substring(c[u-1].end+1,a).trim()),i=r.substring(c[u].start+1,c[u].end),this.setProperty(o,this._Decode_property(i))}}}},n.prototype._Parse_value=function(t){var e=t.lastIndexOf("/"),n=t.indexOf(">")
if(e<n||e+1==t.lastIndexOf("<"))return this.value_="",new std.Pair(t,!1)
var r=n+1,o=t.lastIndexOf("<")
return t=t.substring(r,o),t.indexOf("<")==-1?this.value_=this._Decode_value(t.trim()):this.value_="",new std.Pair(t,!0)},n.prototype._Parse_children=function(e){if(e.indexOf("<")!=-1){var r=e.indexOf("<"),o=e.lastIndexOf(">")+1
e=e.substring(r,o)
var i=0,s=0
r=0
for(var a=0;a<e.length;a++)if("<"==e.charAt(a)&&"</"!=e.substr(a,2)?i++:"/>"!=e.substr(a,2)&&"</"!=e.substr(a,2)||s++,i>=1&&i==s){o=e.indexOf(">",a)
var c=void 0,l=new n
l._Parse(e.substring(r,o+1)),1==this.has(l.tag_)?c=this.get(l.tag_):(c=new t.XMLList,this.set(l.tag_,c)),c.push(l),a=o,r=o+1,i=0,s=0}}},n.prototype.getTag=function(){return this.tag_},n.prototype.getValue=function(){return this.value_},n.prototype.findProperty=function(t){return this.property_map_.find(t)},n.prototype.hasProperty=function(t){return this.property_map_.has(t)},n.prototype.getProperty=function(t){return this.property_map_.get(t)},n.prototype.getPropertyMap=function(){return this.property_map_},n.prototype.setTag=function(t){this.tag_=t},n.prototype.setValue=function(t){this.value_=t},n.prototype.insertValue=function(t,e){var r=new n
return r.setTag(t),r.setValue(e),this.push(r),r},n.prototype.setProperty=function(t,e){this.property_map_.set(t,e)},n.prototype.eraseProperty=function(t){var e=this.property_map_.find(t)
if(1==e.equals(this.property_map_.end()))throw Error("out of range")
this.property_map_.erase(e)},n.prototype.push=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o]
for(var i=0;i<r.length;i++)if(r[i]instanceof n){var s=r[i]
if(1==this.has(s.tag_))this.get(s.tag_).push(s)
else{var a=new t.XMLList
a.push(s),this.set(s.tag_,a)}}else if(r[i]instanceof t.XMLList){var a=r[i]
if(1==a.empty())continue
if(1==this.has(a.getTag())){var c=this.get(a.getTag())
c.insert(c.end(),a.begin(),a.end())}else this.set(a.getTag(),a)}else e.prototype.push.call(this,r[i])
return this.size()},n.prototype.insertAllProperties=function(t){for(var e=t.property_map_.begin();0==e.equals(t.property_map_.end());e=e.next())this.setProperty(e.first,e.second)},n.prototype.clearProperties=function(){this.property_map_.clear()},n.prototype._Compute_min_index=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
for(var n=t[0],r=1;r<t.length;r++)t[r]!=-1&&(n==-1||t[r]<n)&&(n=t[r])
return n},n.prototype._Decode_value=function(e){var n=[new std.Pair("&amp;","&"),new std.Pair("&lt;","<"),new std.Pair("&gt;",">")]
return t.StringUtil.replaceAll.apply(t.StringUtil,__spread([e],n))},n.prototype._Encode_value=function(e){var n=[new std.Pair("&","&amp;"),new std.Pair("<","&lt;"),new std.Pair(">","&gt;")]
return t.StringUtil.replaceAll.apply(t.StringUtil,__spread([e],n))},n.prototype._Decode_property=function(e){var n=[new std.Pair("&amp;","&"),new std.Pair("&lt;","<"),new std.Pair("&gt;",">"),new std.Pair("&quot;",'"'),new std.Pair("&apos;","'"),new std.Pair("&#x9;","\t"),new std.Pair("&#xA;","\n"),new std.Pair("&#xD;","\r")]
return t.StringUtil.replaceAll.apply(t.StringUtil,__spread([e],n))},n.prototype._Encode_property=function(e){var n=[new std.Pair("&","&amp;"),new std.Pair("<","&lt;"),new std.Pair(">","&gt;"),new std.Pair('"',"&quot;"),new std.Pair("'","&apos;"),new std.Pair("\t","&#x9;"),new std.Pair("\n","&#xA;"),new std.Pair("\r","&#xD;")]
return t.StringUtil.replaceAll.apply(t.StringUtil,__spread([e],n))},n.prototype.toString=function(e){void 0===e&&(e=0)
for(var n=t.StringUtil.repeat("\t",e)+"<"+this.tag_,r=this.property_map_.begin();0==r.equals(this.property_map_.end());r=r.next())n+=" "+r.first+'="'+this._Encode_property(r.second)+'"'
if(0==this.size())n+=""!=this.value_?">"+this._Encode_value(this.value_)+"</"+this.tag_+">":" />"
else{n+=">\n"
for(var o=this.begin();0==o.equals(this.end());o=o.next())n+=o.second.toString(e+1)
n+=t.StringUtil.repeat("\t",e)+"</"+this.tag_+">"}return n},n}(std.HashMap)
t.XML=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
var r=n.prototype.push.apply(this,__spread(t))
return this._Notify_insert(this.end().advance(-t.length),this.end()),r},r.prototype.push_back=function(t){n.prototype.push_back.call(this,t),this._Notify_insert(this.end().prev(),this.end())},r.prototype._Insert_by_range=function(t,e,r){var o=this.size(),i=n.prototype._Insert_by_range.call(this,t,e,r)
return o=this.size()-o,this._Notify_insert(i,i.advance(o)),i},r.prototype._Erase_by_range=function(t,e){return this._Notify_erase(t,e),n.prototype._Erase_by_range.call(this,t,e)},r.prototype._Notify_insert=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"insert",t,n)},r.prototype._Notify_erase=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"erase",t,n)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_CollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.Vector)
e.ArrayCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){function n(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r]
for(var o=e.getPropertyMap(),i=o.begin();!i.equals(o.end());i=i.next())if(void 0!=t[i.first]){for(var s=!1,a=0;a<n.length;a++)if(n[a]==i.first){s=!0
break}1!=s&&("string"==typeof t[i.first]?t[i.first]=i.second:"number"==typeof t[i.first]?t[i.first]=Number(i.second):"boolean"==typeof t[i.first]&&(t[i.first]="0"!=i.second&&"false"!=i.second))}}function r(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
var o=new t.library.XML
o.setTag(e.TAG())
for(var i in e)if("string"==typeof i&&("string"==typeof e[i]||"number"==typeof e[i]||"boolean"==typeof e[i])&&e.hasOwnProperty(i)){if(""==i||"_"==i.charAt(0)||"_"==i.charAt(i.length-1))continue
for(var s=!1,a=0;a<n.length;a++)if(n[a]==i){s=!0
break}if(1==s)continue
o.setProperty(i,String(e[i]))}return o}e.construct=n,e.toXML=r}(n=e.IEntity||(e.IEntity={}))
var r=function(){function t(){}return t.prototype.construct=function(t){n.construct(this,t)},t.prototype.key=function(){return""},t.prototype.toXML=function(){return n.toXML(this)},t}()
e.Entity=r}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Insert_by_range=function(t,e,r){var o=this.size(),i=n.prototype._Insert_by_range.call(this,t,e,r)
return o=this.size()-o,this._Notify_insert(i,i.advance(o)),i},r.prototype._Erase_by_range=function(t,e){var r=n.prototype._Erase_by_range.call(this,t,e)
return this._Notify_erase(t,e),r},r.prototype._Notify_insert=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"insert",t,n)},r.prototype._Notify_erase=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"erase",t,n)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_CollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.List)
e.ListCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype.push_front=function(t){n.prototype.push_front.call(this,t),this._Notify_insert(this.begin(),this.begin().next())},r.prototype.push_back=function(t){n.prototype.push.call(this,t),this._Notify_insert(this.end().prev(),this.end())},r.prototype._Insert_by_range=function(t,e,r){var o=this.size(),i=n.prototype._Insert_by_range.call(this,t,e,r)
return o=this.size()-o,this._Notify_insert(i,i.advance(o)),i},r.prototype.pop_front=function(){this._Notify_erase(this.begin(),this.begin().next()),n.prototype.pop_front.call(this)},r.prototype.pop_back=function(){this._Notify_erase(this.end().prev(),this.end()),n.prototype.pop_back.call(this)},r.prototype._Erase_by_range=function(t,e){return this._Notify_erase(t,e),n.prototype._Erase_by_range.call(this,t,e)},r.prototype._Notify_insert=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"insert",t,n)},r.prototype._Notify_erase=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"erase",t,n)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_CollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.Deque)
e.DequeCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.construct=function(t){e.IEntityGroup.construct(this,t)},n.prototype.key=function(){return""},n.prototype.has=function(t){return e.IEntityGroup.has(this,t)},n.prototype.count=function(t){return e.IEntityGroup.count(this,t)},n.prototype.get=function(t){return e.IEntityGroup.get(this,t)},n.prototype.toXML=function(){return e.IEntityGroup.toXML(this)},n}(t.collections.ArrayCollection)
e.EntityArrayCollection=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={})),function(t){var e
!function(e){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.construct=function(t){e.IEntityGroup.construct(this,t)},n.prototype.key=function(){return""},n.prototype.has=function(t){return e.IEntityGroup.has(this,t)},n.prototype.count=function(t){return e.IEntityGroup.count(this,t)},n.prototype.get=function(t){return e.IEntityGroup.get(this,t)},n.prototype.toXML=function(){return e.IEntityGroup.toXML(this)},n}(t.collections.ListCollection)
e.EntityListCollection=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={})),function(t){var e
!function(e){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.construct=function(t){e.IEntityGroup.construct(this,t)},n.prototype.key=function(){return""},n.prototype.has=function(t){return e.IEntityGroup.has(this,t)},n.prototype.count=function(t){return e.IEntityGroup.count(this,t)},n.prototype.get=function(t){return e.IEntityGroup.get(this,t)},n.prototype.toXML=function(){return e.IEntityGroup.toXML(this)},n}(t.collections.DequeCollection)
e.EntityDequeCollection=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(t){function e(){var e=t.call(this)||this
return e.addEventListener("erase",e._Handle_system_erase,e),e}return __extends(e,t),e.prototype._Handle_system_erase=function(t){for(var e=t.first;!e.equals(t.last);e=e.next())e.value.destructor()},e.prototype.hasRole=function(t){for(var e=0;e<this.size();e++)for(var n=0;n<this.at(e).size();n++)if(this.at(e).at(n).key()==t)return!0
return!1},e.prototype.getRole=function(t){for(var e=0;e<this.size();e++)for(var n=0;n<this.at(e).size();n++)if(this.at(e).at(n).key()==t)return this.at(e).at(n)
throw new std.OutOfRange("No role with such name.")},e.prototype.sendData=function(t){for(var e=0;e<this.size();e++)this.at(e).sendData(t)},e.prototype.TAG=function(){return"systemArray"},e.prototype.CHILD_TAG=function(){return"system"},e}(t.protocol.EntityDequeCollection)
e.ExternalSystemArray=n}(n=e.external||(e.external={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(n){var r=function(e){function r(){var t=e.call(this)||this
return t.history_sequence_=0,t}return __extends(r,e),r.prototype.sendSegmentData=function(t,e){return this.sendPieceData(t,0,e)},r.prototype.sendPieceData=function(e,n,r){if(0==e.has("_History_uid"))e.push_back(new t.protocol.InvokeParameter("_History_uid",++this.history_sequence_))
else{var o=e.get("_History_uid").getValue()
o>this.history_sequence_&&(this.history_sequence_=o)}for(var i=r-n,s=new std.Vector,a=0,c=0;c<this.size();c++)0==this.at(c).exclude_&&s.push(this.at(c))
for(var c=0;c<s.size();c++){var l=s.at(c),u=c==s.size()-1?i-n:Math.floor(i/s.size()*l.getPerformance())
0!=u&&(l._Send_piece_data(e,n,n+u),n+=u,a++)}return a},r.prototype._Complete_history=function(t){if(t instanceof n.PRInvokeHistory==0)return!1
for(var e=t.getUID(),r=0;r<this.size();r++)if(1==this.at(r).progress_list_.has(e))return!1
for(var o=new std.Vector,i=0,r=0;r<this.size();r++){var s=this.at(r)
if(0!=s.history_list_.has(e)){var a=s.history_list_.get(e),c=a.computeSize()/a.computeElapsedTime()
o.push_back(std.make_pair(s,c)),i+=c}}i/=o.size()
for(var r=0;r<o.size();r++){var s=o.at(r).first
if(1!=s.enforced_){var l=o.at(r).second/i,u=void 0
u=s.history_list_.size()<2?.3:Math.min(.7,1/(s.history_list_.size()-1)),s.setPerformance(s.getPerformance()*u+l*(1-u))}}return this._Normalize_performance(),!0},r.prototype._Normalize_performance=function(){for(var t=0,e=0,n=0;n<this.size();n++){var r=this.at(n)
1!=r.enforced_&&(t+=r.getPerformance(),e++)}t/=e
for(var n=0;n<this.size();n++){var r=this.at(n)
1!=r.enforced_&&r.setPerformance(r.getPerformance()/t)}},r}(e.external.ExternalSystemArray)
n.ParallelSystemArray=r}(n=e.parallel||(e.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(n){var r=function(e){function r(){var t=e.call(this)||this
return t.process_map_=new std.HashMap,t}return __extends(r,e),r.prototype.construct=function(t){if(this.process_map_.clear(),1==t.has("processes")&&1==t.get("processes").front().has("process"))for(var n=t.get("processes").front().get("process"),r=0;r<n.size();r++){var o=n.at(r),i=this.createProcess(o)
i.construct(o),this.process_map_.emplace(i.getName(),i)}e.prototype.construct.call(this,t)},r.prototype.getProcessMap=function(){return this.process_map_},r.prototype.hasProcess=function(t){return this.process_map_.has(t)},r.prototype.getProcess=function(t){return this.process_map_.get(t)},r.prototype.insertProcess=function(t){return this.process_map_.emplace(t.getName(),t).second},r.prototype.eraseProcess=function(t){var e=this.process_map_.size()
return this.process_map_.erase(t)!=e},r.prototype._Complete_history=function(t){return t instanceof n.DSInvokeHistory?null!=t.getProcess()&&(this.estimate_system_performance(t),this.estimate_process_resource(t),this._Normalize_performance(),!0):e.prototype._Complete_history.call(this,t)},r.prototype.estimate_process_resource=function(t){var e=t.getProcess()
if(1!=e.enforced_){for(var n=0,r=0,o=this.process_map_.begin();!o.equals(this.process_map_.end());o=o.next()){var i=o.second
i!=t.getProcess()&&1!=i.history_list_.empty()&&(n+=i._Compute_average_elapsed_time()*i.getResource(),r++)}if(0!=r){n/=r
var s=t.computeElapsedTime()/t.getWeight(),a=s/n,c=void 0
c=e.history_list_.size()<2?.15:Math.min(.85,1/(e.history_list_.size()-1)),e.setResource(e.getResource()*c+a*(1-c))}}},r.prototype.estimate_system_performance=function(t){var e=t.getSystem()
if(1!=e.enforced_){for(var n=0,r=0,o=0;o<this.size();o++){var i=this.at(o),s=i._Compute_average_elapsed_time()
s!=-1&&(n+=s,r++)}if(0!=r){n/=r
var a=t.computeElapsedTime()/t.getWeight(),c=n/a,l=void 0
l=e.history_list_.size()<2?.3:Math.min(.7,1/(e.history_list_.size()-1)),e.setPerformance(e.getPerformance()*l+c*(1-l))}}},r.prototype._Normalize_performance=function(){e.prototype._Normalize_performance.call(this)
for(var t=0,n=0,r=this.process_map_.begin();!r.equals(this.process_map_.end());r=r.next()){var o=r.second
1!=o.enforced_&&(t+=o.getResource(),n++)}t/=n
for(var r=this.process_map_.begin();!r.equals(this.process_map_.end());r=r.next()){var i=r.second
1!=i.enforced_&&i.setResource(i.getResource()/t)}},r.prototype.toXML=function(){var n=e.prototype.toXML.call(this)
if(1==this.process_map_.empty())return n
var r=new t.library.XML
r.setTag("processes")
for(var o=this.process_map_.begin();!o.equals(this.process_map_.end());o=o.next())r.push(o.second.toXML())
return n.push(r),n},r}(e.parallel.ParallelSystemArray)
n.DistributedSystemArray=r}(n=e.distributed||(e.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){var e=t.call(this)||this
return e.mediator_=null,e}return __extends(e,t),e.prototype.startMediator=function(){null==this.mediator_&&(this.mediator_=this.createMediator(),this.mediator_.start())},e.prototype.getMediator=function(){return this.mediator_},e.prototype._Complete_history=function(e){var n=t.prototype._Complete_history.call(this,e)
return 1==n&&this.mediator_._Complete_history(e.getUID()),n},e}(t.DistributedSystemArray)
t.DistributedSystemArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
try{module.exports=samchon}catch(t){}var samchon
!function(t){var e
!function(t){var e=function(){function t(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),this.type_=t.toLowerCase(),this.target_=null,this.currentTarget_=null,this.trusted_=!1,this.bubbles_=e,this.cancelable_=n,this.defaultPrevented_=!1,this.cancelBubble_=!1,this.timeStamp_=new Date}return t.prototype.initEvent=function(t,e,n){this.type_=t.toLowerCase(),this.bubbles_=e,this.cancelable_=n},t.prototype.stopImmediatePropagation=function(){},t.prototype.stopPropagation=function(){},Object.defineProperty(t.prototype,"type",{get:function(){return this.type_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.target_},set:function(t){this.target_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.currentTarget_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bubbles",{get:function(){return this.bubbles_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return this.cancelable_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventPhase",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this.defaultPrevented_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"srcElement",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelBubble",{get:function(){return this.cancelBubble_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeStamp",{get:function(){return this.timeStamp_.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"returnValue",{get:function(){return!1},enumerable:!0,configurable:!0}),t}()
t.BasicEvent=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(t){function e(e,n,r){var o=t.call(this,e,!1,"insert"==e||"erase"==e)||this
return"erase"==e&&n instanceof std.base.ArrayIterator?(o.temporary_container_=new std.Vector(n,r),o.origin_first_=n,o.first_=o.temporary_container_.begin(),o.last_=o.temporary_container_.end()):(o.temporary_container_=null,o.origin_first_=null,o.first_=n,o.last_=r),o}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this.target_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this.first_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.last_},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){if(0!=this.cancelable){if(this.defaultPrevented_=!0,"insert"==this.type)this.target.erase(this.first_,this.last_)
else if("erase"==this.type){var t=this.target,e=void 0
e=null==this.temporary_container_?this.first_.prev().next():this.origin_first_.prev().next(),t.insert(e,this.first_,this.last_)}this.defaultPrevented_=!1}},e}(t.library.BasicEvent)
e.CollectionEvent=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={})),function(t){var e
!function(t){var e
!function(t){t.INSERT="insert",t.ERASE="erase",t.REFRESH="refresh"}(e=t.CollectionEvent||(t.CollectionEvent={}))}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_MapCollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.HashMap)
e.HashMapCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_MapCollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.HashMultiMap)
e.HashMultiMapCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_CollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.HashMultiSet)
e.HashMultiSetCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_CollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.HashSet)
e.HashSetCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(e){function n(e,n,r,o){if(0!=e.hasEventListener(n)){var i=new t.CollectionEvent(n,r,o)
setTimeout(function(){e.dispatchEvent(i)})}}function r(e,n,r,o){if(0!=e.hasEventListener(n)){var i=new t.MapCollectionEvent(n,r,o)
setTimeout(function(){e.dispatchEvent(i)})}}e._Dispatch_CollectionEvent=n,e._Dispatch_MapCollectionEvent=r}(e=t.ICollection||(t.ICollection={}))}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"first",{get:function(){return this.first_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.last_},enumerable:!0,configurable:!0}),e}(t.CollectionEvent)
t.MapCollectionEvent=e}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_MapCollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.TreeMap)
e.TreeMapCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_MapCollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.TreeMultiMap)
e.TreeMultiMapCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_CollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.TreeMultiSet)
e.TreeMultiSetCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this
return e.event_dispatcher_=new t.library.EventDispatcher(e),e}return __extends(r,n),r.prototype._Handle_insert=function(t,r){n.prototype._Handle_insert.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,r)},r.prototype._Handle_erase=function(t,r){n.prototype._Handle_erase.call(this,t,r),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,r)},r.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},r.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r,o
0==t.length?(r=this.begin(),o=this.end()):1==t.length?(r=t[0],o=r.next()):(r=t[0],o=t[1]),e.ICollection._Dispatch_CollectionEvent(this,"refresh",r,o)},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},r}(std.TreeSet)
e.TreeSetCollection=n}(e=t.collections||(t.collections={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
this.digits_=t,this.dividers_=new Array(t.length),this.size_=1
for(var n=t.length-1;n>=0;n--)this.dividers_[n]=this.size_,this.size_*=t[n]}return t.prototype.size=function(){return this.size_},t.prototype.digits=function(){return this.digits_},t.prototype.at=function(t){for(var e=[],n=0;n<this.digits_.length;n++){var r=Math.floor(t/this.dividers_[n])
r%=this.digits_[n],e.push(r)}return e},t}()
t.CartesianProduct=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function t(t,e){this.n_=t,this.r_=e,this.size_=t
for(var n=t-1;n>t-e;n--)this.size_*=n}return t.prototype.size=function(){return this.size_},t.prototype.n=function(){return this.n_},t.prototype.r=function(){return this.r_},t.prototype.at=function(t){for(var e=[],n=0;n<this.n_;n++)e.push(n)
for(var r=[],n=0;n<this.r_;n++){var o=t%e.length
t=Math.floor(t/e.length),r.push(e[o]),e.splice(o,1)}return r},t}()
t.Permutation=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){return t.call(this,e,e)||this}return __extends(e,t),e}(t.Permutation)
t.Factorial=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function t(t,e){this.n_=t,this.r_=e,this.size_=Math.pow(t,e),this.divider_array=new Array
for(var n=0;n<e;n++){var r=e-(n+1),o=Math.pow(t,r)
this.divider_array.push(o)}}return t.prototype.size=function(){return this.size_},t.prototype.n=function(){return this.n_},t.prototype.r=function(){return this.r_},t.prototype.at=function(t){for(var e=[],n=0;n<this.r_;n++){var r=Math.floor(t/this.divider_array[n])%this.n_
e.push(r)}return e},t}()
t.RepeatedPermutation=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function t(t){void 0===t&&(t=null),null==t?this.event_dispatcher_=this:this.event_dispatcher_=t,this.event_listeners_=new std.HashMap}return t.prototype.hasEventListener=function(t){return t=t.toLowerCase(),this.event_listeners_.has(t)},t.prototype.dispatchEvent=function(t){if(t.target=this.event_dispatcher_,0==this.event_listeners_.has(t.type))return!1
for(var e=this.event_listeners_.get(t.type),n=e.begin();0==n.equals(e.end());n=n.next())1!=t.defaultPrevented&&n.value.first.apply(n.value.second,[t])
return!0},t.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),t=t.toLowerCase()
var r
0==this.event_listeners_.has(t)?(r=new std.HashSet,this.event_listeners_.set(t,r)):r=this.event_listeners_.get(t),r.insert(new std.Pair(e,n))},t.prototype.removeEventListener=function(t,e,n){if(void 0===n&&(n=null),t=t.toLowerCase(),0!=this.event_listeners_.has(t)){var r=this.event_listeners_.get(t),o=new std.Pair(e,n)
0!=r.has(o)&&(r.erase(o),1==r.empty()&&this.event_listeners_.erase(t))}},t}()
t.EventDispatcher=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(1==t.length){var n=t[0]
this.children_=new std.Vector(n.children_),this.compare_=n.compare_,this.cloner_=n.cloner_}else{var r=t[0],o=t[1]
this.compare_=t[2],this.cloner_=t[3],this.children_=new std.Vector
for(var i=0;i<o;i++){var s=this.cloner_(r)
i>0&&std.random_shuffle(s.begin(),s.end()),this.children_.push_back(s)}}}return t.prototype.getChildren=function(){return this.children_},t.prototype.getCompare=function(){return this.compare_},t.prototype.getCloner=function(){return this.cloner_},t.prototype.fitTest=function(){for(var t=this.children_.front(),e=1;e<this.children_.size();e++)1==this.compare_(this.children_.at(e),t)&&(t=this.children_.at(e))
return t},t}()
t.GAPopulation=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function e(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=.015),void 0===n&&(n=10),this.unique_=t,this.mutation_rate_=e,this.tournament_=n}return e.prototype.evolveGeneArray=function(e,n,r,o,i){for(var s=new t.GAPopulation(e,n,o,i),a=0;a<r;a++)s=this.evolvePopulation(s)
return s.fitTest()},e.prototype.evolvePopulation=function(e){var n=e.getChildren().size(),r=new t.GAPopulation(e)
r.getChildren().set(0,e.fitTest())
for(var o=1;o<n;o++){var i=this.selection(e),s=this.selection(e),a=this.crossover(e,i,s)
this.mutate(a),r.getChildren().set(o,a)}return r},e.prototype.selection=function(e){for(var n=e.getChildren().size(),r=new t.GAPopulation(e),o=0;o<n;o++){var i=Math.floor(Math.random()*n)
i==n&&i--,r.getChildren().set(o,e.getChildren().at(i))}return r.fitTest()},e.prototype.crossover=function(t,e,n){var r=t.getCloner()(e),o=e.size()
if(0==this.unique_)for(var i=0;i<o;i++)Math.random()>.5&&r.set(i,e.at(i))
else{var s=new std.HashSet,a=new std.HashSet,c=Math.random()*o,l=Math.random()*o
c>l&&(h=__read([l,c],2),c=h[0],l=h[1])
for(var i=0;i<o;i++)c<=i&&i<l?s.insert(e.at(i)):a.insert(i)
for(var i=0;i<o;i++){var u=n.at(i)
0!=s.find(u).equals(s.end())&&(r.set(a.begin().value,u),a.erase(a.begin()))}}return r
var h},e.prototype.mutate=function(t){for(var e=t.begin();!e.equals(t.end());e=e.next())if(!(Math.random()>this.mutation_rate_)){var n=Math.floor(Math.random()*t.size())
e.swap(t.begin().advance(n))}},e}()
t.GeneticAlgorithm=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(e){function n(){var t=e.call(this)||this
return t.file_=null,t.data_=null,t}return __extends(n,e),Object.defineProperty(n.prototype,"data",{get:function(){return this.data_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){var t=this.file_.name.lastIndexOf(".")
return t==-1?this.file_.name:this.file_.name.substr(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extension",{get:function(){var t=this.file_.name.lastIndexOf(".")
return t==-1?null:this.file_.name.substr(t+1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.file_.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.file_.size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"modificationDate",{get:function(){return this.file_.lastModifiedDate},enumerable:!0,configurable:!0}),n.prototype.browse=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
var r=this,o=document.createElement("input")
o.type="file",e.length>0&&(o.accept=e.toString()),o.onchange=function(e){r.file_=o.files[0],r.dispatchEvent(new t.BasicEvent("select"))},o.onclick=function(t){document.body.removeChild(t.target)},o.style.display="none",document.body.appendChild(o),o.click()},n.prototype.load=function(){var e=this,n=new FileReader
n.onload=function(r){e.data_=n.result,e.dispatchEvent(new t.BasicEvent("complete"))},n.readAsText(this.file_)},n.prototype.save=function(t,e){n.save(t,e)},n.save=function(t,e){var n=new Blob([t],{type:"text/plain"})
if(void 0!=window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,e)
else{var r=document.createElement("a")
r.download=e,r.innerHTML="",r.href=window.URL.createObjectURL(n),r.onclick=function(t){document.body.removeChild(t.target)},r.style.display="none",document.body.appendChild(r),r.click()}},n}(t.EventDispatcher)
t.FileReference=e
var n=function(n){function r(){var t=n.call(this)||this
return t.file_list=new std.Vector,t}return __extends(r,n),Object.defineProperty(r.prototype,"fileList",{get:function(){return this.file_list},enumerable:!0,configurable:!0}),r.prototype.browse=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r]
var o=this,i=document.createElement("input")
i.type="file",n.length>0&&(i.accept=n.toString()),i.onchange=function(n){var r=i.files
o.file_list.clear()
for(var s=0;s<r.length;s++){var a=new e
a.file_=r[s],o.file_list.push(a)}o.dispatchEvent(new t.BasicEvent("select"))},i.onclick=function(t){document.body.removeChild(t.target)},i.style.display="none",document.body.appendChild(i),i.click()},r}(t.EventDispatcher)
t.FileReferenceList=n}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function e(){}return e.between=function(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=""),""==e&&""==n)return t
if(""==e)return t.substr(0,t.indexOf(n))
if(""==n)return t.substr(t.indexOf(e)+e.length)
var r=t.indexOf(e)
return r==-1?"":t.substring(r+e.length,t.indexOf(n,r+e.length))},e.betweens=function(t,n,r){void 0===n&&(n=""),void 0===r&&(r="")
var o=[]
if(""==n&&""==r)return[t]
if(n==r)for(var i=-1,s=void 0,a=0;(s=t.indexOf(n,i+1))!=-1;)++a%2==0&&o.push(t.substring(i,s)),s=i
else if(o=t.split(n).splice(1),""!=r)for(var c=o.length-1;c>=0;c--)o[c].indexOf(r)==-1?o.splice(c,1):o[c]=e.between(o[c],"",r)
return o},e.trim=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
return 0==n.length&&(n=e.SPACE_ARRAY),e.ltrim.apply(e,__spread([e.rtrim.apply(e,__spread([t],n))],n))},e.ltrim=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
0==n.length&&(n=e.SPACE_ARRAY)
for(var o=0;o<t.length;){for(var i=o,s=0;s<n.length;s++){var a=t.indexOf(n[s],i)+n[s].length
i=Math.max(i,a)}if(i<=o)break
o=i}return o==t.length?"":t.substr(o)},e.rtrim=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
0==n.length&&(n=e.SPACE_ARRAY)
for(var o=t.length;0!=o;){for(var i=o,s=0;s<n.length;s++){var a=t.lastIndexOf(n[s],i-1)
a!=-1&&(i=Math.min(i,a))}if(i==-1||i>=o)break
o=i}return t.substr(0,o)},e.substitute=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
for(;;){if(0==n.length)break
var o=e._Fetch_substitute_index(t)
if(o==Number.MAX_VALUE)break
t=e.replaceAll(t,"{"+o+"}",String(n[0])),n.shift()}return t},e.substituteSQL=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o]
for(;;){if(0==r.length)break
var i=r[0],s=e._Fetch_substitute_index(n)
if(s==Number.MAX_VALUE)break
var a="{"+s+"}"
if(null==i)n=e.replaceAll(n,a,"NULL")
else if("boolean"==typeof i||"number"==typeof i)n=e.replaceAll(n,a,String(i))
else if("string"==typeof i){var c=e._Substitute_sql_string(i)
n=e.replaceAll(n,a,c)}else if(i instanceof Array);else{if(void 0!=i.toXML){var l=i.toXML()
l instanceof t.XML&&(i=l)}var c=i.toString()
c=e._Substitute_sql_string(c),n=e.replaceAll(n,a,c)}r.shift()}return n},e._Substitute_sql_string=function(t){return t=e.replaceAll(t,"\\","\\\\"),t=e.replaceAll(t,"'","\\'"),"'"+t+"'"},e._Fetch_substitute_index=function(t){for(var n=e.betweens(t,"{","}"),r=Number.MAX_VALUE,o=0;o<n.length;o++){var i=Number(n[o])
1!=isNaN(i)&&(r=Math.min(r,i))}return r},e.replaceAll=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]
if(2==e.length&&"string"==typeof e[0]){var r=e[0],o=e[1]
return t.split(r).join(o)}if(0==e.length)return t
for(var i=0;i<e.length;i++){var s=e[i]
t=t.split(s.first).join(s.second)}return t},e.removeHTMLSpaces=function(t){return e.replaceAll(t,new std.Pair("&nbsp;"," "),new std.Pair("\t"," "),new std.Pair("  "," "))},e.repeat=function(t,e){for(var n="",r=0;r<e;r++)n+=t
return n},e.numberFormat=function(t,n){void 0===n&&(n=2)
var r=""
t=Math.round(t*Math.pow(10,n)),t/=Math.pow(10,n)
var o=t<0,i=Math.floor(Math.abs(t)),s=Math.abs(t)-Math.floor(Math.abs(t))
if(0==i)r="0"
else for(var a=Math.floor(Math.log(i)/Math.log(10))+1,c=0;c<=a;c++){var l=Math.floor(i%Math.pow(10,c+1))
l=Math.floor(l/Math.pow(10,c)),c==a&&0==l||(c>0&&c%3==0&&(r=","+r),r=l+r)}if(1==o&&(r="-"+r),n>0&&0!=s){s=Math.round(s*Math.pow(10,n))
var u=n-Math.floor(Math.log(s)/Math.log(10))-1
r+="."+e.repeat("0",u)+s}return r},e.percentFormat=function(t,n){return void 0===n&&(n=2),e.numberFormat(100*t,n)+" %"},e}()
e.SPACE_ARRAY=[" ","\t","\r","\n"],t.StringUtil=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){void 0===e&&(e="")
var n=t.call(this)||this
return""!=e&&n.decode(e),n}return __extends(e,t),e.prototype.decode=function(t){if(this.clear(),""!=t.trim()){t.indexOf("?")!=-1&&(t=t.substr(t.indexOf("?")+1))
for(var e=t.split("&"),n=0;n<e.length;n++){var r=e[n].indexOf("="),o=void 0,i=void 0
r==-1?(o=e[n],i=""):(o=e[n].substr(0,r),i=decodeURIComponent(e[n].substr(r+1))),this.emplace(o,i)}}},e.prototype.toString=function(){for(var t="",e=this.begin();!e.equals(this.end());e=e.next())e.equals(this.begin())||(t+="&"),t+=e.first+"="+encodeURIComponent(e.second)
return t},e}(std.HashMap)
t.URLVariables=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getTag=function(){return this.front().getTag()},e.prototype.toString=function(t){void 0===t&&(t=0)
for(var e="",n=0;n<this.size();n++)e+=this.at(n).toString(t)+"\n"
return e},e}(std.Deque)
t.XMLList=e}(e=t.library||(t.library={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(){function n(t){void 0===t&&(t=null),this.listener_=t,this.onClose=null,this.binary_invoke_=null,this.binary_parameters_=new std.Queue,this.unhandled_invokes_=new std.Deque}return n.prototype.isConnected=function(){return this.connected_},n.prototype._Is_binary_invoke=function(){return null!=this.binary_invoke_},n.prototype.replyData=function(t){null==this.listener_?this.unhandled_invokes_.push_back(t):this.listener_._Reply_data instanceof Function?this.listener_._Reply_data(t):this.listener_.replyData(t)},n.prototype._Handle_string=function(n){var r=new e.Invoke
r.construct(new t.library.XML(n))
for(var o=0;o<r.size();o++){var i=r.at(o)
"ByteArray"==i.getType()&&(null==this.binary_invoke_&&(this.binary_invoke_=r),this.binary_parameters_.push(i))}null==this.binary_invoke_&&this.replyData(r)},n.prototype._Handle_binary=function(t){var e=this.binary_parameters_.front()
if(e.setValue(t),this.binary_parameters_.pop(),1==this.binary_parameters_.empty()){var n=this.binary_invoke_
this.binary_invoke_=null,this.replyData(n)}},n}()
e._CommunicatorBase=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this
return e.socket_=null,e.header_bytes_=null,e.data_=null,e.data_index_=-1,e.listening_=!1,e}return __extends(e,t),e.prototype.close=function(){this.socket_.end()},e.prototype._Start_listen=function(){1!=this.listening_&&(this.listening_=!0,this.socket_.on("data",this._Listen_piece.bind(this)),this.socket_.on("error",this._Handle_error.bind(this)),this.socket_.on("end",this._Handle_close.bind(this)),this.socket_.on("close",this._Handle_close.bind(this)))},e.prototype._Handle_error=function(){},e.prototype._Handle_close=function(){this.connected_=!1,null!=this.onClose&&this.onClose()},e.prototype.sendData=function(t){var e=new Buffer(8),n=t.toXML().toString()
e.writeUInt32BE(0,0),e.writeUInt32BE(Buffer.byteLength(n,"utf8"),4),this.socket_.write(e),this.socket_.write(n,"utf8")
for(var r=0;r<t.size();r++){var o=t.at(r)
if("ByteArray"==o.getType()){var i=new Buffer(8),s=o.getValue()
i.writeUInt32BE(0,0),i.writeUInt32BE(s.byteLength,4),this.socket_.write(i),this.socket_.write(s)}}},e.prototype._Listen_piece=function(t){null==this.data_?this._Listen_header(t,0):this._Listen_data(t,0)},e.prototype._Listen_header=function(t,e){if(null!=this.header_bytes_&&(this.header_bytes_.copy(t,e,0,this.header_bytes_.byteLength),this.header_bytes_=null),e>t.byteLength-8)return this.header_bytes_=new Buffer(8),void t.copy(this.header_bytes_,0,e,t.byteLength-e)
var n=t.readUInt32BE(e+4)
e+=8,0!=n&&(this.data_=new Buffer(n),this.data_index_=0),e<t.byteLength&&(0!=n?this._Listen_data(t,e):this._Listen_header(t,e))},e.prototype._Listen_data=function(t,e){var n=Math.min(this.data_.byteLength-this.data_index_,t.byteLength-e)
t.copy(this.data_,this.data_index_,e,e+n),this.data_index_+=n,e+=n,this.data_index_==this.data_.byteLength&&(0==this._Is_binary_invoke()?this._Handle_string(this.data_.toString()):this._Handle_binary(this.data_),this.data_=null,this.data_index_=-1),e<t.byteLength&&this._Listen_header(t,e)},e}(t._CommunicatorBase)
t.Communicator=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this)||this
return n.socket_=e,n.connected_=!0,n}return __extends(e,t),e.prototype.listen=function(t){this.listener_=t,this._Start_listen()},e}(t.Communicator)
t.ClientDriver=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._Handle_message=function(t){0==this._Is_binary_invoke()?this._Handle_string(t.data):this._Handle_binary(t.data)},e}(t._CommunicatorBase)
t.DedicatedWorkerCommunicator=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(){var e=t.call(this)||this
return onmessage=e._Handle_message.bind(e),e.connected_=!0,e}return __extends(e,t),e.prototype.listen=function(t){this.listener_=t},e.prototype.close=function(){close()},e.prototype.sendData=function(t){postMessage(t.toXML().toString(),"")
for(var e=0;e<t.size();e++)"ByteArray"==t.at(e).getType()&&postMessage(t.at(e).getValue(),"")},e}(t.DedicatedWorkerCommunicator)
t.DedicatedWorkerClientDriver=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.close=function(){this.connected_=!1,this.port_.close(),null!=this.onClose&&this.onClose()},e.prototype.sendData=function(t){this.port_.postMessage(t.toXML().toString())
for(var e=0;e<t.size();e++)"ByteaArray"==t.at(e).getType()&&this.port_.postMessage(t.at(e).getValue())},e.prototype._Handle_message=function(t){0==this._Is_binary_invoke()?this._Handle_string(t.data):this._Handle_binary(t.data)},e}(t._CommunicatorBase)
t.SharedWorkerCommunicator=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this)||this
return n.port_=e,n.connected_=!0,n.listening_=!1,n}return __extends(e,t),e.prototype.listen=function(t){this.listener_=t,1!=this.listening_&&(this.listening_=!0,this.port_.onmessage=this._Handle_message.bind(this))},e}(t.SharedWorkerCommunicator)
t.SharedWorkerClientDriver=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this
return e.connection_=null,e}return __extends(e,t),e.prototype.close=function(){this.connection_.close()},e.prototype.sendData=function(t){this.connection_.sendUTF(t.toXML().toString())
for(var e=0;e<t.size();e++)"ByteArray"==t.at(e).getType()&&this.connection_.sendBytes(t.at(e).getValue())},e.prototype._Handle_message=function(t){"utf8"==t.type?this._Handle_string(t.utf8Data):this._Handle_binary(t.binaryData)},e.prototype._Handle_close=function(){this.connected_=!1,null!=this.onClose&&this.onClose()},e}(t._CommunicatorBase)
t.WebCommunicator=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e,n,r){var o=t.call(this)||this
return o.connection_=e,o.path_=n,o.session_id_=r,o.listening_=!1,o}return __extends(e,t),e.prototype.listen=function(t){this.listener_=t,1!=this.listening_&&(this.listening_=!0,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("close",this._Handle_close.bind(this)),this.connection_.on("error",this._Handle_close.bind(this)))},e.prototype.getPath=function(){return this.path_},e.prototype.getSessionID=function(){return this.session_id_},e}(t.WebCommunicator)
t.WebClientDriver=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this
return n.worker_=null,n}return __extends(e,t),e.prototype.connect=function(t){this.worker_=new Worker(t),this.worker_.onmessage=this._Handle_message.bind(this),this.connected_=!0,null!=this.onConnect&&this.onConnect()},e.prototype.close=function(){this.worker_.terminate(),null!=this.onClose&&this.onClose()},e.prototype.sendData=function(t){this.worker_.postMessage(t.toXML().toString())
for(var e=0;e<t.size();e++)"ByteArray"==t.at(e).getType()&&this.worker_.postMessage(t.at(e).getValue())},e}(t.DedicatedWorkerCommunicator)
t.DedicatedWorkerServerConnector=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this
return n.connected_=!1,n}return __extends(e,t),e.prototype.connect=function(t,e){this.socket_=net.connect({host:t,port:e},this._Handle_connect.bind(this))},e.prototype._Handle_connect=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
this.connected_=!0,this._Start_listen(),this._Send_dummy_packet_repeatedly(),null!=this.onConnect&&this.onConnect()},e.prototype._Send_dummy_packet_repeatedly=function(){setInterval(function(){var t=new Buffer(8)
t.writeUInt32BE(0,0),t.writeUInt32BE(0,4)
try{this.socket_.write(t)}catch(t){return}}.bind(this),5e3)},e}(t.Communicator)
t.ServerConnector=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this
return n.connected_=!1,n.onConnect=null,n}return __extends(e,t),e.prototype.connect=function(t){var e=new SharedWorker(t)
this.port_=e.port,this.port_.onmessage=this._Handle_message.bind(this),this.connected_=!0,null!=this.onConnect&&this.onConnect()},e}(t.SharedWorkerCommunicator)
t.SharedWorkerServerConnector=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this
return n.browser_socket_=null,n.node_client_=null,n.connected_=!1,n.onConnect=null,n}return __extends(e,t),e.prototype.connect=function(t,e,n){void 0===n&&(n="/")
var r
if(t.indexOf("ws://")==-1){if(t.indexOf("://")!=-1)throw"only websocket is possible"
t="ws://"+t}0!=n.length&&"/"!=n.charAt(0)&&(n="/"+n),r=t+":"+e+n,1==std.is_node()?(this.node_client_=new websocket.client,this.node_client_.on("connect",this._Handle_node_connect.bind(this)),this.node_client_.connect(r)):(this.browser_socket_=new WebSocket(r),this.browser_socket_.onopen=this._Handle_browser_connect.bind(this),this.browser_socket_.onerror=this._Handle_close.bind(this),this.browser_socket_.onclose=this._Handle_close.bind(this),this.browser_socket_.onmessage=this._Handle_browser_message.bind(this))},e.prototype.close=function(){1==std.is_node()?t.prototype.close.call(this):this.browser_socket_.close()},e.prototype.sendData=function(e){if(null!=this.browser_socket_){this.browser_socket_.send(e.toXML().toString())
for(var n=0;n<e.size();n++)"ByteArray"==e.at(n).getType()&&this.browser_socket_.send(e.at(n).getValue())}else t.prototype.sendData.call(this,e)},e.prototype._Handle_browser_connect=function(t){this.connected_=!0,null!=this.onConnect&&this.onConnect()},e.prototype._Handle_browser_message=function(t){0==this._Is_binary_invoke()?this._Handle_string(t.data):this._Handle_binary(t.data)},e.prototype._Handle_node_connect=function(t){this.connected_=!0,this.connection_=t,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("close",this._Handle_close.bind(this)),this.connection_.on("error",this._Handle_close.bind(this)),null!=this.onConnect&&this.onConnect()},e}(t.WebCommunicator)
t.WebServerConnector=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(e){function n(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o]
if(e.clear(),t.IEntity.construct.apply(t.IEntity,__spread([e,n],r)),0!=n.has(e.CHILD_TAG())){for(var i=new std.Vector,s=n.get(e.CHILD_TAG()),a=0;a<s.size();a++){var c=e.createChild(s.at(a))
null!=c&&(c.construct(s.at(a)),i.push(c))}e.assign(i.begin(),i.end())}}function r(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
for(var o=t.IEntity.toXML.apply(t.IEntity,__spread([e],n)),i=e.begin();!i.equals(e.end());i=i.next())o.push(i.value.toXML())
return o}function o(t,e){return std.any_of(t.begin(),t.end(),function(t){return std.equal_to(t.key(),e)})}function i(t,e){return std.count_if(t.begin(),t.end(),function(t){return std.equal_to(t.key(),e)})}function s(t,e){for(var n=t.begin();!n.equals(t.end());n=n.next())if(1==std.equal_to(n.value.key(),e))return n.value
throw new std.OutOfRange("out of range")}e.construct=n,e.toXML=r,e.has=o,e.count=i,e.get=s}(e=t.IEntityGroup||(t.IEntityGroup={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={})),function(t){var e
!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.construct=function(e){t.IEntityGroup.construct(this,e)},n.prototype.key=function(){return""},n.prototype.has=function(e){return t.IEntityGroup.has(this,e)},n.prototype.count=function(e){return t.IEntityGroup.count(this,e)},n.prototype.get=function(e){return t.IEntityGroup.get(this,e)},n.prototype.toXML=function(){return t.IEntityGroup.toXML(this,"length")},n}(std.Vector)
t.EntityArray=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={})),function(t){var e
!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.construct=function(e){t.IEntityGroup.construct(this,e)},n.prototype.key=function(){return""},n.prototype.has=function(e){return t.IEntityGroup.has(this,e)},n.prototype.count=function(e){return t.IEntityGroup.count(this,e)},n.prototype.get=function(e){return t.IEntityGroup.get(this,e)},n.prototype.toXML=function(){return t.IEntityGroup.toXML(this)},n}(std.List)
t.EntityList=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={})),function(t){var e
!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.construct=function(e){t.IEntityGroup.construct(this,e)},n.prototype.key=function(){return""},n.prototype.has=function(e){return t.IEntityGroup.has(this,e)},n.prototype.count=function(e){return t.IEntityGroup.count(this,e)},n.prototype.get=function(e){return t.IEntityGroup.get(this,e)},n.prototype.toXML=function(){return t.IEntityGroup.toXML(this)},n}(std.Deque)
t.EntityDeque=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r]
var o=e.call(this)||this
if(o.listener="",0==n.length)o.listener=""
else{o.listener=n[0]
for(var i=1;i<n.length;i++)o.push_back(new t.InvokeParameter(n[i]))}return o}return __extends(n,e),n.prototype.createChild=function(e){return new t.InvokeParameter},n.prototype.getListener=function(){return this.listener},n.prototype.getArguments=function(){for(var t=[],e=0;e<this.size();e++){if("_History_uid"==this.at(e).getName())continue
t.push(this.at(e).getValue())}return t},n.prototype.apply=function(t,e){void 0===e&&(e=null)
var n=this.getArguments()
if(null==e){if(!(this.listener in t&&t[this.listener]instanceof Function))return!1
e=t[this.listener]}return e.apply(t,n),!0},n.prototype.TAG=function(){return"invoke"},n.prototype.CHILD_TAG=function(){return"parameter"},n}(t.EntityArray)
t.Invoke=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n=function(e){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
var r=e.call(this)||this
return r.name="",r.type="",r.value=null,0==t.length?r:(1==t.length?(r.name="",r.setValue(t[0])):(r.name=t[0],r.setValue(t[1])),r)}return __extends(n,e),n.prototype.construct=function(t){if(this.name=t.hasProperty("name")?t.getProperty("name"):"",this.type=t.getProperty("type"),"XML"==this.type)this.value=t.begin().second.front()
else if("boolean"==this.type){var e=t.getValue()
this.value="0"!=e&&"false"!=e}else"number"==this.type?this.value=Number(t.getValue()):"string"==this.type&&(this.value=t.getValue())},n.prototype.setValue=function(e){this.value=e,e instanceof t.library.XML?this.type="XML":e instanceof Uint8Array?this.type="ByteArray":this.type=typeof e},n.prototype.key=function(){return this.name},n.prototype.getName=function(){return this.name},n.prototype.getType=function(){return this.type},n.prototype.getValue=function(){return this.value},n.prototype.TAG=function(){return"parameter"},n.prototype.toXML=function(){var e=new t.library.XML
return e.setTag(this.TAG()),""!=this.name&&e.setProperty("name",this.name),e.setProperty("type",this.type),"XML"==this.type?e.push(this.value):"ByteArray"!=this.type&&e.setValue(this.value+""),e},n}(e.Entity)
e.InvokeParameter=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function e(){}return e.prototype.open=function(){this.addClient(new t.DedicatedWorkerClientDriver)},e.prototype.close=function(){close()},e}()
t.DedicatedWorkerServer=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function e(){this.net_driver_=null}return e.prototype.open=function(t){this.net_driver_=net.createServer(this._Handle_connect.bind(this)),this.net_driver_.listen(t)},e.prototype.close=function(){this.net_driver_.close(),this.net_driver_=null},e.prototype._Handle_connect=function(e){var n=new t.ClientDriver(e)
this.addClient(n)},e}()
t.Server=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function e(){}return e.prototype.open=function(){self.addEventListener("connect",this._Handle_connect.bind(this))},e.prototype.close=function(){close()},e.prototype._Handle_connect=function(e){var n=e.ports[e.ports.length-1],r=new t.SharedWorkerClientDriver(n)
this.addClient(r)},e}()
t.SharedWorkerServer=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(){function e(){this.sequence_=0}return e.prototype.open=function(t){this.my_port_=t,this.http_server_=http.createServer(),this.http_server_.listen(t)
var e=new websocket.server({httpServer:this.http_server_})
e.on("request",this._Handle_request.bind(this))},e.prototype.close=function(){this.http_server_.close()},e.prototype._Handle_request=function(e){var n=e.resource,r=this._Fetch_session_id(e.cookies),o=e.accept("",e.origin,[{name:"SESSION_ID",value:r}]),i=new t.WebClientDriver(o,n,r)
this.addClient(i)},e.prototype._Fetch_session_id=function(t){for(var e=0;e<t.length;e++)if("SESSION_ID"==t[e].name)return t[e].value
return this._Issue_session_id()},e.prototype._Issue_session_id=function(){var t=this.my_port_,e=++this.sequence_,n=(new Date).getTime(),r=Math.floor(4294967295*Math.random())
return t.toString(16)+e.toString(16)+n.toString(16)+r.toString(16)},e}()
t.WebServer=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this)||this
return n.hooker_=e,n}return __extends(e,t),e.prototype.addClient=function(t){this.hooker_.addClient(t)},e}(t.DedicatedWorkerServer)
t.DedicatedWorkerServerBase=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this)||this
return n.hooker_=e,n}return __extends(e,t),e.prototype.addClient=function(t){this.hooker_.addClient(t)},e}(t.Server)
t.ServerBase=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this)||this
return n.hooker_=e,n}return __extends(e,t),e.prototype.addClient=function(t){this.hooker_.addClient(t)},e}(t.SharedWorkerServer)
t.SharedWorkerServerBase=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this)||this
return n.hooker_=e,n}return __extends(e,t),e.prototype.addClient=function(t){this.hooker_.addClient(t)},e}(t.WebServer)
t.WebServerBase=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(n){function r(t){var e=n.call(this)||this
return e.system_array_=t,e.name="",e.resource=1,e.progress_list_=new std.HashMap,e.history_list_=new std.HashMap,e}return __extends(r,n),r.prototype.key=function(){return this.name},r.prototype.getSystemArray=function(){return this.system_array_},r.prototype.getName=function(){return this.name},r.prototype.getResource=function(){return this.resource},r.prototype.setResource=function(t){this.resource=t,this.enforced_=!1},r.prototype.enforceResource=function(t){this.resource=t,this.enforced_=!0},r.prototype._Compute_average_elapsed_time=function(){for(var t=0,e=this.history_list_.begin();!e.equals(this.history_list_.end());e=e.next()){var n=e.second,r=n.computeElapsedTime()/n.getWeight()
t+=r*n.getSystem().getPerformance()}return t/this.history_list_.size()},r.prototype.sendData=function(n,r){if(void 0===r&&(r=1),1==this.system_array_.empty())return null
var o
0==n.has("_History_uid")?(o=++this.system_array_.history_sequence_,n.push_back(new t.protocol.InvokeParameter("_History_uid",o))):(o=n.get("_History_uid").getValue(),this.system_array_.history_sequence_=o,this.progress_list_.erase(o)),0==n.has("_Process_name")&&n.push_back(new t.protocol.InvokeParameter("_Process_name",this.name)),0==n.has("_Process_weight")?n.push_back(new t.protocol.InvokeParameter("_Process_weight",r)):r=n.get("_Process_name").getValue()
for(var i=null,s=0;s<this.system_array_.size();s++){var a=this.system_array_.at(s)
1!=a.exclude_&&(null==i||a.progress_list_.empty()&&a.history_list_.empty()||a.progress_list_.size()<i.progress_list_.size()||a.progress_list_.size()==i.progress_list_.size()&&a.getPerformance()>i.getPerformance()||a.progress_list_.size()==i.progress_list_.size()&&a.getPerformance()==i.getPerformance()&&a.history_list_.size()<i.history_list_.size())&&(i=a)}if(null==i)throw new std.OutOfRange("No remote system to send data exists.")
var c=new e.DSInvokeHistory(i,this,n,r)
return this.progress_list_.emplace(o,c),i.progress_list_.emplace(o,std.make_pair(n,c)),i.sendData(n),i},r.prototype._Complete_history=function(t){this.progress_list_.erase(t.getUID()),this.history_list_.emplace(t.getUID(),t)},r.prototype.TAG=function(){return"process"},r}(t.protocol.Entity)
e.DistributedProcess=n}(n=e.distributed||(e.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(t){function e(e,n){void 0===n&&(n=null)
var r=t.call(this)||this
return r.system_array_=e,r.communicator=n,null!=n&&n.listen(r),r.name="",r}return __extends(e,t),e.prototype.destructor=function(){null!=this.communicator&&1==this.communicator.isConnected()&&(this.communicator.onClose=null,this.communicator.close())},e.prototype._Handle_close=function(){null!=this.system_array_&&std.remove(this.system_array_.begin(),this.system_array_.end(),this)},e.prototype.getSystemArray=function(){return this.system_array_},e.prototype.key=function(){return this.name},e.prototype.getName=function(){return this.name},Object.defineProperty(e.prototype,"communicator",{get:function(){return this.communicator_},set:function(t){this.communicator_=t,null!=this.communicator_&&(this.communicator.onClose=this._Handle_close.bind(this))},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.communicator.close()},e.prototype.sendData=function(t){this.communicator.sendData(t)},e.prototype.replyData=function(t){this.system_array_.replyData(t)
for(var e=0;e<this.size();e++)this.at(e).replyData(t)},e.prototype.TAG=function(){return"system"},e.prototype.CHILD_TAG=function(){return"role"},e}(t.protocol.EntityDequeCollection)
e.ExternalSystem=n}(n=e.external||(e.external={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(n){var r=function(e){function r(t,n){void 0===n&&(n=null)
var r=e.call(this,t,n)||this
return r.progress_list_=new std.HashMap,r.history_list_=new std.HashMap,r.enforced_=!1,r.exclude_=!1,r.performance=1,r}return __extends(r,e),r.prototype.destructor=function(){this.exclude_=!0
for(var t=this.progress_list_.begin();!t.equals(this.progress_list_.end());t=t.next()){var n=t.second.first,r=t.second.second
this._Send_back_history(n,r)}e.prototype.destructor.call(this)},r.prototype.getSystemArray=function(){return this.system_array_},r.prototype.getPerformance=function(){return this.performance},r.prototype.setPerformance=function(t){this.performance=t,this.enforced_=!1},r.prototype.enforcePerformance=function(t){this.performance=t,this.enforced_=!0},r.prototype._Send_piece_data=function(e,r,o){var i=new t.protocol.Invoke(e.getListener())
i.assign(e.begin(),e.end()),i.push_back(new t.protocol.InvokeParameter("_Piece_first",r)),i.push_back(new t.protocol.InvokeParameter("_Piece_last",o))
var s=new n.PRInvokeHistory(i)
this.progress_list_.emplace(s.getUID(),std.make_pair(i,s)),this.sendData(i)},r.prototype._Reply_data=function(t){if("_Report_history"==t.getListener())this._Report_history(t.front().getValue())
else if("_Send_back_history"==t.getListener()){var e=t.front().getValue(),n=this.progress_list_.find(e)
if(1==n.equals(this.progress_list_.end()))return
this._Send_back_history(n.second.first,n.second.second)}else this.replyData(t)},r.prototype._Report_history=function(t){var e=new n.PRInvokeHistory
e.construct(t)
var r=this.progress_list_.find(e.getUID())
1!=r.equals(this.progress_list_.end())&&(e.first=r.second.second.getFirst(),e.last=r.second.second.computeSize(),this.progress_list_.erase(r),this.history_list_.emplace(e.getUID(),e),this.getSystemArray()._Complete_history(e))},r.prototype._Send_back_history=function(t,e){e instanceof n.PRInvokeHistory&&(std.remove_if(t.begin(),t.end(),function(t){return"_History_uid"==t.getName()||"_Piece_first"==t.getName()||"_Piece_last"==t.getName()}),this.getSystemArray().sendPieceData(t,e.getFirst(),e.getLast())),this.progress_list_.erase(e.getUID())},r}(e.external.ExternalSystem)
n.ParallelSystem=r}(n=e.parallel||(e.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(e){var n=function(t){function n(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return __extends(n,t),n.prototype.createChild=function(t){return null},n.prototype.getSystemArray=function(){return this.system_array_},n.prototype._Compute_average_elapsed_time=function(){for(var t=0,n=0,r=this.history_list_.begin();!r.equals(this.history_list_.end());r=r.next()){var o=r.second
if(o instanceof e.DSInvokeHistory!=0){var i=o.computeElapsedTime()/o.getWeight()
t+=i/o.getProcess().getResource(),n++}}return 0==n?-1:t/n},n.prototype.replyData=function(e){for(var n=this.getSystemArray().getProcessMap(),r=n.begin();!r.equals(n.end());r=r.next())r.second.replyData(e)
t.prototype.replyData.call(this,e)},n.prototype._Report_history=function(n){if(1==n.hasProperty("_Piece_first"))return t.prototype._Report_history.call(this,n)
var r=new e.DSInvokeHistory(this)
r.construct(n)
var o=this.progress_list_.find(r.getUID())
1!=o.equals(this.progress_list_.end())&&(r.process_=o.second.second.getProcess(),r.weight_=o.second.second.getWeight(),this.progress_list_.erase(o),this.history_list_.emplace(r.getUID(),r),null!=r.getProcess()&&r.getProcess()._Complete_history(r),this.getSystemArray()._Complete_history(r))},n.prototype._Send_back_history=function(n,r){r instanceof e.DSInvokeHistory&&r.getProcess().sendData(n,r.getWeight()),t.prototype._Send_back_history.call(this,n,r)},n}(t.parallel.ParallelSystem)
e.DistributedSystem=n}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(e){function n(t){void 0===t&&(t=null)
var n=e.call(this)||this
return null==t?(n.uid=0,n.listener=""):(n.uid=t.get("_History_uid").getValue(),n.listener=t.getListener(),n.start_time_=new Date),n}return __extends(n,e),n.prototype.construct=function(t){e.prototype.construct.call(this,t),this.start_time_=new Date(parseInt(t.getProperty("startTime"))),this.end_time_=new Date(parseInt(t.getProperty("endTime")))},n.prototype.complete=function(){this.end_time_=new Date},n.prototype.key=function(){return this.uid},n.prototype.getUID=function(){return this.uid},n.prototype.getListener=function(){return this.listener},n.prototype.getStartTime=function(){return this.start_time_},n.prototype.getEndTime=function(){return this.end_time_},n.prototype.computeElapsedTime=function(){return Math.max(this.end_time_.getTime()-this.start_time_.getTime(),1)},n.prototype.TAG=function(){return"history"},n.prototype.toXML=function(){var t=e.prototype.toXML.call(this)
return t.setProperty("startTime",this.start_time_.getTime()+""),t.setProperty("endTime",this.end_time_.getTime()+""),t},n.prototype.toInvoke=function(){return new t.protocol.Invoke("_Report_history",this.toXML())},n}(t.protocol.Entity)
e.InvokeHistory=n}(n=e.slave||(e.slave={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(e){var n=function(t){function e(e,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=1)
var i=t.call(this,r)||this
return i.system_=e,i.process_=n,i.weight_=o,i}return __extends(e,t),e.prototype.construct=function(e){if(t.prototype.construct.call(this,e),0==e.hasProperty("process"))return void(this.process_=null)
var n=this.system_.getSystemArray(),r=e.getProperty("process")
1==n.hasProcess(r)?this.process_=n.getProcess(r):this.process_=null},e.prototype.getSystem=function(){return this.system_},e.prototype.getProcess=function(){return this.process_},e.prototype.getWeight=function(){return this.weight_},e.prototype.toXML=function(){var e=t.prototype.toXML.call(this)
return null!=this.process_&&e.setProperty("process",this.process_.getName()),e},e}(t.slave.InvokeHistory)
e.DSInvokeHistory=n}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t)
null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.DistributedSystemArray)
t.DistributedClientArray=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t)
null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.DistributedSystemArrayMediator)
t.DistributedClientArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this
return n.ip="",n.port=0,n}return __extends(e,t),e.prototype.connect=function(){null==this.communicator&&(this.communicator=this.createServerConnector(),this.communicator.connect(this.ip,this.port))},e}(t.DistributedSystem)
t.DistributedServer=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++)this.at(t).connect()},e}(t.DistributedSystemArray)
t.DistributedServerArray=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++)this.at(t).connect()},e}(t.DistributedSystemArrayMediator)
t.DistributedServerArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t)
void 0!=e.connect&&e.connect()}},e}(t.DistributedClientArray)
t.DistributedServerClientArray=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t)
void 0!=e.connect&&e.connect()}},e}(t.DistributedClientArrayMediator)
t.DistributedServerClientArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(t){function e(e){var n=t.call(this)||this
return n.system=e,n}return __extends(e,t),e.prototype.key=function(){return this.name},e.prototype.getSystemArray=function(){return this.system.getSystemArray()},e.prototype.getSystem=function(){return this.system},e.prototype.getName=function(){return this.name},e.prototype.sendData=function(t){this.system.sendData(t)},e.prototype.TAG=function(){return"role"},e}(t.protocol.Entity)
e.ExternalSystemRole=n}(n=e.external||(e.external={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){var e=t.call(this)||this
return e.server_base_=null,e}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t)
null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&this.server_base_.close()},e}(t.ExternalSystemArray)
t.ExternalClientArray=e}(e=t.external||(t.external={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this
return n.ip="",n.port=0,n}return __extends(e,t),e.prototype.connect=function(){this.communicator=this.createServerConnector(),this.communicator.connect(this.ip,this.port)},e}(t.ExternalSystem)
t.ExternalServer=e}(e=t.external||(t.external={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++)this.at(t).connect()},e}(t.ExternalSystemArray)
t.ExternalServerArray=e}(e=t.external||(t.external={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t)
void 0!=e.connect&&e.connect()}},e}(t.ExternalClientArray)
t.ExternalServerClientArray=e}(e=t.external||(t.external={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(){function e(){this.communicator_=null}return e.prototype.sendData=function(t){this.communicator_.sendData(t)},e.prototype._Reply_data=function(e){var n=this
if(e.has("_History_uid")){var r=new t.InvokeHistory(e)
std.remove_if(e.begin(),e.end(),function(t){return"_History_uid"==t.getName()||"_Process_name"==t.getName()||"_Process_weight"==t.getName()})
var o=new t.PInvoke(e,r,this),i=this.replyData(o)
i instanceof Function&&i.then instanceof Function&&i.catch instanceof Function?i.then(function(){n._Complete_process(o)}):this._Complete_process(o)}else this.replyData(e)},e.prototype._Complete_process=function(t){0==t.isHold()&&t.complete()},e}()
t.SlaveSystem=e}(e=t.slave||(t.slave={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(n){var r=function(n){function r(t){var e=n.call(this)||this
return e.system_array_=t,e.progress_list_=new std.HashMap,e}return __extends(r,n),r.prototype.getSystemArray=function(){return this.system_array_},r.prototype._Complete_history=function(t){if(0!=this.progress_list_.has(t)){for(var e=this.progress_list_.get(t),n=null,r=null,o=0;o<this.system_array_.size();o++){var i=this.system_array_.at(o),s=i.history_list_.find(t)
if(1!=s.equals(i.history_list_.end())){var a=s.second;(null==n||a.getStartTime()<n)&&(n=a.getStartTime()),(null==r||a.getEndTime()>r)&&(r=a.getEndTime())}}e.start_time_=n,e.end_time_=r,this.progress_list_.erase(t),this.sendData(e.toInvoke())}},r.prototype._Reply_data=function(n){if(1==n.has("_History_uid")){var r=new e.slave.InvokeHistory(n)
if(1==this.system_array_.empty())return void this.sendData(new t.protocol.Invoke("_Send_back_history",r.getUID()))
if(this.progress_list_.emplace(r.getUID(),r),1==n.has("_Piece_first")){var o=n.get("_Piece_first").getValue(),i=n.get("_Piece_last").getValue()
n.erase(n.end().advance(-2),n.end()),this.system_array_.sendPieceData(n,o,i)}else if(this.system_array_ instanceof e.distributed.DistributedSystemArrayMediator&&1==n.has("_Process_name")){var s=n.get("_Process_name").getValue()
if(0==this.system_array_.hasProcess(s))return
var a=this.system_array_.getProcess(s)
a.sendData(n)}}else this.replyData(n)},r.prototype.replyData=function(t){this.system_array_.sendData(t)},r}(e.slave.SlaveSystem)
n.MediatorSystem=r}(n=e.parallel||(e.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){var e=t.call(this)||this
return e.mediator_=null,e}return __extends(e,t),e.prototype.startMediator=function(){null==this.mediator_&&(this.mediator_=this.createMediator(),this.mediator_.start())},e.prototype.getMediator=function(){return this.mediator_},e.prototype._Complete_history=function(e){var n=t.prototype._Complete_history.call(this,e)
return 1==n&&this.mediator_._Complete_history(e.getUID()),n},e}(t.ParallelSystemArray)
t.ParallelSystemArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(e){var n=function(t){function e(e){void 0===e&&(e=null)
var n=t.call(this,e)||this
return null==e?(n.first=0,n.last=0):(n.first=e.get("_Piece_first").getValue(),n.last=e.get("_Piece_last").getValue()),n}return __extends(e,t),e.prototype.getFirst=function(){return this.first},e.prototype.getLast=function(){return this.last},e.prototype.computeSize=function(){return this.last-this.first},e}(t.slave.InvokeHistory)
e.PRInvokeHistory=n}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(e){function n(t,n,r){var o=e.call(this,t)||this
return o.ip=n,o.port=r,o}return __extends(n,e),n.prototype.createServerConnector=function(){return new t.protocol.ServerConnector(this)},n.prototype.start=function(){this.connect()},n.prototype.connect=function(){null==this.communicator_&&(this.communicator_=this.createServerConnector(),this.communicator_.connect(this.ip,this.port))},n}(e.MediatorSystem)
e.MediatorClient=n
var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createServerConnector=function(){return new t.protocol.WebServerConnector(this)},n}(n)
e.MediatorWebClient=r
var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createServerConnector=function(){return new t.protocol.SharedWorkerServerConnector(this)},n}(n)
e.MediatorSharedWorkerClient=o}(n=e.parallel||(e.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(e){function n(t,n){var r=e.call(this,t)||this
return r.port=n,r}return __extends(n,e),n.prototype.createServerBase=function(){return new t.protocol.ServerBase(this)},n.prototype.addClient=function(t){this.communicator_=t,t.listen(this)},n.prototype.start=function(){this.open(this.port)},n.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},n.prototype.close=function(){null!=this.server_base_&&this.server_base_.close()},n}(e.MediatorSystem)
e.MediatorServer=n
var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createServerBase=function(){return new t.protocol.WebServerBase(this)},n}(n)
e.MediatorWebServer=r
var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createServerBase=function(){return new t.protocol.DedicatedWorkerServerBase(this)},n}(n)
e.MediatorDedicatedWorkerServer=o
var i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createServerBase=function(){return new t.protocol.SharedWorkerServerBase(this)},n}(n)
e.MediatorSharedWorkerServer=i}(n=e.parallel||(e.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t)
null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&this.server_base_.close()},e}(t.ParallelSystemArray)
t.ParallelClientArray=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t)
null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&(this.server_base_.open(t),this.startMediator())},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.ParallelSystemArrayMediator)
t.ParallelClientArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this
return n.ip="",n.port=0,n}return __extends(e,t),e.prototype.connect=function(){null==this.communicator&&(this.communicator=this.createServerConnector(),this.communicator.connect(this.ip,this.port))},e}(t.ParallelSystem)
t.ParallelServer=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++)this.at(t).connect()},e}(t.ParallelSystemArray)
t.ParallelServerArray=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++)this.at(t).connect()},e}(t.ParallelSystemArrayMediator)
t.ParallelServerArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t)
void 0!=e.connect&&e.connect()}},e}(t.ParallelClientArray)
t.ParallelServerClientArray=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t)
void 0!=e.connect&&e.connect()}},e}(t.ParallelClientArrayMediator)
t.ParallelServerClientArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(){function e(t,e){this.user_=t,this.no_=++t.sequence_,this.communicator_=e,this.communicator_.listen(this),this.service_=this.createService(e.getPath())}return e.prototype.destructor=function(){null!=this.service_&&this.service_.destructor()},e.prototype.close=function(){this.user_.erase(this.no_)},e.prototype.getUser=function(){return this.user_},e.prototype.getService=function(){return this.service_},e.prototype.getNo=function(){return this.no_},e.prototype.changeService=function(e){null!=this.service_&&this.service_.destructor(),e instanceof t.Service?this.service_=e:this.service_=this.createService(e)},e.prototype.sendData=function(t){this.communicator_.sendData(t)},e.prototype.replyData=function(t){this.user_.replyData(t),null!=this.service_&&this.service_.replyData(t)},e}()
t.Client=e}(e=t.service||(t.service={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(t){function e(){var e=t.call(this)||this
return e.session_map_=new std.HashMap,e.account_map_=new std.HashMap,e}return __extends(e,t),e.prototype.has=function(t){return this.account_map_.has(t)},e.prototype.get=function(t){return this.account_map_.get(t)},e.prototype.sendData=function(t){for(var e=this.session_map_.begin();!e.equals(this.session_map_.end());e=e.next())e.second.sendData(t)},e.prototype.addClient=function(t){var e
1==this.session_map_.has(t.getSessionID())?e=this.session_map_.get(t.getSessionID()):(e=this.createUser(),e.session_id_=t.getSessionID(),this.session_map_.insert(std.make_pair(t.getSessionID(),e)))
var n=e.createClient(t)
e.insert(std.make_pair(n.getNo(),n)),t.onClose=function(){e.erase(n.getNo()),null!=n.getService()&&n.getService().destructor(),n.destructor()}},e.prototype._Erase_user=function(t){setTimeout(function(){var e=this
0!=t.empty()&&(e.session_map_.erase(t.session_id_),""!=t.getAccountID()&&e.account_map_.erase(t.getAccountID()),t.destructor())}.bind(this),3e4)},e}(t.protocol.WebServer)
e.Server=n}(n=e.service||(e.service={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(){function t(t,e){this.client_=t,this.path_=e}return t.prototype.destructor=function(){},t.prototype.getClient=function(){return this.client_},t.prototype.getPath=function(){return this.path_},t.prototype.sendData=function(t){return this.client_.sendData(t)},t}()
t.Service=e}(e=t.service||(t.service={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(t){function e(e){var n=t.call(this)||this
return n.server_=e,n.account_id_="guest",n.authority_=0,n.session_id_="",n.sequence_=0,n.addEventListener("erase",n._Handle_erase_client,n),n}return __extends(e,t),e.prototype.destructor=function(){},e.prototype._Handle_erase_client=function(t){for(var e=t.first;!e.equals(t.last);e=e.next())e.second.close()
1==this.empty()&&this.server_._Erase_user(this)},e.prototype.getServer=function(){return this.server_},e.prototype.getAccountID=function(){return this.account_id_},e.prototype.getAuthority=function(){return this.authority_},e.prototype.setAccount=function(t,e){this.account_id_!=t&&(""!=this.account_id_&&this.server_.account_map_.erase(this.account_id_),this.account_id_=t,this.authority_=e,""!=t&&this.server_.account_map_.set(t,this))},e.prototype.logout=function(){""!=this.account_id_&&this.server_.account_map_.erase(this.account_id_),this.setAccount("",0)},e.prototype.sendData=function(t){for(var e=this.begin();!e.equals(this.end());e=e.next())e.second.sendData(t)},e.prototype.replyData=function(t){this.server_.replyData(t)},e}(t.collections.HashMapCollection)
e.User=n}(n=e.service||(e.service={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(e){var n
!function(e){var n=function(t){function e(e,n,r){var o=t.call(this,e.getListener())||this
return o.assign(e.begin(),e.end()),o.history_=n,o.slave_system_=r,o.hold_=!1,o}return __extends(e,t),e.prototype.getHistory=function(){return this.history_},e.prototype.isHold=function(){return this.hold_},e.prototype.hold=function(){this.hold_=!0},e.prototype.complete=function(){this.history_.complete(),this.slave_system_.sendData(this.history_.toInvoke())},e}(t.protocol.Invoke)
e.PInvoke=n}(n=e.slave||(e.slave={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(t,e){null==this.communicator_&&(this.communicator_=this.createServerConnector(),this.communicator_.connect(t,e))},e}(t.SlaveSystem)
t.SlaveClient=e}(e=t.slave||(t.slave={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
var samchon
!function(t){var e
!function(t){var e
!function(t){var e=function(t){function e(){var e=t.call(this)||this
return e.server_base_=null,e}return __extends(e,t),e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&this.server_base_.close()},e.prototype.addClient=function(t){this.communicator_=t,t.listen(this)},e}(t.SlaveSystem)
t.SlaveServer=e}(e=t.slave||(t.slave={}))}(e=t.templates||(t.templates={}))}(samchon||(samchon={}))
